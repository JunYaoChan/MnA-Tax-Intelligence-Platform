2025-09-09 21:38:34,568 [INFO] httpx [_client.py:1025]: HTTP Request: POST https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/messages "HTTP/2 201 Created"
2025-09-09 21:38:34,696 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/conversation_documents?select=document_id&conversation_id=eq.1b20d64a-839d-4183-8421-a2cd2059c252 "HTTP/2 200 OK"
2025-09-09 21:38:34,860 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/messages?select=%2A&conversation_id=eq.1b20d64a-839d-4183-8421-a2cd2059c252&order=created_at.asc&limit=100 "HTTP/2 200 OK"
2025-09-09 21:38:34,911 [INFO] orchestration.orchestrator [orchestrator.py:88]: Step 1: Processing query - Analyze the tax implications of a complex cross-border merger involving a US parent company acquirin...
2025-09-09 21:38:34,913 [INFO] orchestration.orchestrator [orchestrator.py:92]: Step 2: Vector database retrieval across agents
2025-09-09 21:38:34,913 [INFO] orchestration.orchestrator [orchestrator.py:208]: Agent CaseLawAgent using query: 'Analyze the tax implications of a complex cross-border merger involving a US parent company acquiring a German subsidiary through a Section 338(h)(10) election, considering the impact on NOL carryforwards, international tax planning strategies, transfer pricing implications, and the interaction with the GILTI provisions under the Tax Cuts and Jobs Act. What are the optimal structuring alternatives and their respective risk profiles?' (len=436)
2025-09-09 21:38:34,913 [INFO] orchestration.orchestrator [orchestrator.py:208]: Agent RegulationAgent using query: 'Analyze the tax implications of a complex cross-border merger involving a US parent company acquiring a German subsidiary through a Section 338(h)(10) election, considering the impact on NOL carryforwards, international tax planning strategies, transfer pricing implications, and the interaction with the GILTI provisions under the Tax Cuts and Jobs Act. What are the optimal structuring alternatives and their respective risk profiles?' (len=436)
2025-09-09 21:38:34,914 [INFO] orchestration.orchestrator [orchestrator.py:208]: Agent PrecedentAgent using query: 'Analyze the tax implications of a complex cross-border merger involving a US parent company acquiring a German subsidiary through a Section 338(h)(10) election, considering the impact on NOL carryforwards, international tax planning strategies, transfer pricing implications, and the interaction with the GILTI provisions under the Tax Cuts and Jobs Act. What are the optimal structuring alternatives and their respective risk profiles?' (len=436)
2025-09-09 21:38:34,914 [INFO] orchestration.orchestrator [orchestrator.py:208]: Agent ExpertAgent using query: 'Analyze the tax implications of a complex cross-border merger involving a US parent company acquiring a German subsidiary through a Section 338(h)(10) election, considering the impact on NOL carryforwards, international tax planning strategies, transfer pricing implications, and the interaction with the GILTI provisions under the Tax Cuts and Jobs Act. What are the optimal structuring alternatives and their respective risk profiles?' (len=436)
2025-09-09 21:38:35,499 [INFO] agents.base.PrecedentAgent [base.py:49]: No internal results found, using function tools
2025-09-09 21:38:35,500 [INFO] agents.base.PrecedentAgent [precedent.py:33]: Using function tools to enhance precedent search
2025-09-09 21:38:35,500 [INFO] agents.base.PrecedentAgent [base.py:107]: Calling function tool: brave_search
2025-09-09 21:38:35,501 [WARNING] function_tools.brave_search [brave_search.py:160]: Query has 71 words, exceeds Brave API limit of 50. Attempting query splitting/summarization.
2025-09-09 21:38:35,501 [INFO] function_tools.brave_search [brave_search.py:89]: Splitting complex query with 71 words into focused sub-queries
2025-09-09 21:38:35,501 [INFO] function_tools.brave_search [brave_search.py:255]: Splitting complex query into 3 sub-queries
2025-09-09 21:38:35,502 [INFO] function_tools.brave_search [brave_search.py:261]: Searching sub-query 1: precedent Analyze
2025-09-09 21:38:35,793 [INFO] httpx [_client.py:1740]: HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-09-09 21:38:36,432 [INFO] httpx [_client.py:1025]: HTTP Request: POST https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/rpc/match_documents "HTTP/2 200 OK"
2025-09-09 21:38:36,438 [INFO] httpx [_client.py:1740]: HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-09-09 21:38:36,444 [INFO] httpx [_client.py:1740]: HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-09-09 21:38:36,625 [INFO] httpx [_client.py:1025]: HTTP Request: POST https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/rpc/match_documents "HTTP/2 200 OK"
2025-09-09 21:38:36,629 [INFO] agents.base.ExpertAgent [base.py:49]: No internal results found, using function tools
2025-09-09 21:38:36,629 [INFO] agents.base.ExpertAgent [expert.py:39]: Using function tools to enhance expert analysis
2025-09-09 21:38:36,629 [INFO] agents.base.ExpertAgent [base.py:107]: Calling function tool: brave_search
2025-09-09 21:38:36,630 [WARNING] function_tools.brave_search [brave_search.py:160]: Query has 74 words, exceeds Brave API limit of 50. Attempting query splitting/summarization.
2025-09-09 21:38:36,630 [INFO] function_tools.brave_search [brave_search.py:89]: Splitting complex query with 74 words into focused sub-queries
2025-09-09 21:38:36,630 [INFO] function_tools.brave_search [brave_search.py:255]: Splitting complex query into 3 sub-queries
2025-09-09 21:38:36,630 [INFO] function_tools.brave_search [brave_search.py:261]: Searching sub-query 1: Analyze implications
2025-09-09 21:38:36,802 [INFO] httpx [_client.py:1025]: HTTP Request: POST https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/rpc/match_documents "HTTP/2 200 OK"
2025-09-09 21:38:36,803 [INFO] agents.base.CaseLawAgent [base.py:49]: No internal results found, using function tools
2025-09-09 21:38:36,803 [INFO] agents.base.CaseLawAgent [case_law.py:32]: Using function tools to enhance case law search
2025-09-09 21:38:36,803 [INFO] agents.base.CaseLawAgent [base.py:107]: Calling function tool: brave_search
2025-09-09 21:38:36,803 [WARNING] function_tools.brave_search [brave_search.py:160]: Query has 71 words, exceeds Brave API limit of 50. Attempting query splitting/summarization.
2025-09-09 21:38:36,803 [INFO] function_tools.brave_search [brave_search.py:89]: Splitting complex query with 71 words into focused sub-queries
2025-09-09 21:38:36,803 [INFO] function_tools.brave_search [brave_search.py:255]: Splitting complex query into 3 sub-queries
2025-09-09 21:38:36,804 [INFO] function_tools.brave_search [brave_search.py:261]: Searching sub-query 1: caselaw Analyze
2025-09-09 21:38:37,236 [INFO] function_tools.brave_search [brave_search.py:201]: Brave search successful: 3 results
2025-09-09 21:38:37,292 [INFO] httpx [_client.py:1740]: HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-09-09 21:38:37,680 [INFO] httpx [_client.py:1025]: HTTP Request: POST https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/rpc/match_documents "HTTP/2 200 OK"
2025-09-09 21:38:37,682 [INFO] agents.base.RegulationAgent [base.py:49]: No internal results found, using function tools
2025-09-09 21:38:37,682 [INFO] agents.base.RegulationAgent [regulation.py:33]: Using function tools to enhance regulation search
2025-09-09 21:38:37,682 [INFO] agents.base.RegulationAgent [base.py:107]: Calling function tool: federal_register
2025-09-09 21:38:37,682 [INFO] agents.base.RegulationAgent [base.py:107]: Calling function tool: llm_enhancer
2025-09-09 21:38:37,683 [INFO] agents.base.RegulationAgent [base.py:26]: Agent RegulationAgent completed in 2.61s with confidence 0.00%
2025-09-09 21:38:37,684 [WARNING] function_tools.brave_search [brave_search.py:221]: Rate limited, waiting 1 seconds...
2025-09-09 21:38:37,684 [WARNING] function_tools.brave_search [brave_search.py:221]: Rate limited, waiting 1 seconds...
2025-09-09 21:38:37,737 [INFO] function_tools.brave_search [brave_search.py:261]: Searching sub-query 2: implications precedent Analyze
2025-09-09 21:38:38,643 [INFO] function_tools.brave_search [brave_search.py:201]: Brave search successful: 3 results
2025-09-09 21:38:38,886 [WARNING] function_tools.brave_search [brave_search.py:221]: Rate limited, waiting 2 seconds...
2025-09-09 21:38:38,887 [WARNING] function_tools.brave_search [brave_search.py:221]: Rate limited, waiting 2 seconds...
2025-09-09 21:38:39,145 [INFO] function_tools.brave_search [brave_search.py:261]: Searching sub-query 3: complex involving company tax
2025-09-09 21:38:40,020 [INFO] function_tools.brave_search [brave_search.py:201]: Brave search successful: 3 results
2025-09-09 21:38:40,021 [INFO] agents.base.PrecedentAgent [base.py:107]: Calling function tool: llm_enhancer
2025-09-09 21:38:40,021 [INFO] agents.base.PrecedentAgent [base.py:26]: Agent PrecedentAgent completed in 4.95s with confidence 30.00%
2025-09-09 21:38:41,123 [WARNING] function_tools.brave_search [brave_search.py:221]: Rate limited, waiting 4 seconds...
2025-09-09 21:38:41,759 [INFO] function_tools.brave_search [brave_search.py:201]: Brave search successful: 3 results
2025-09-09 21:38:42,260 [INFO] function_tools.brave_search [brave_search.py:261]: Searching sub-query 2: implications caselaw Analyze
2025-09-09 21:38:43,151 [INFO] function_tools.brave_search [brave_search.py:201]: Brave search successful: 3 results
2025-09-09 21:38:43,653 [INFO] function_tools.brave_search [brave_search.py:261]: Searching sub-query 3: complex involving company tax
2025-09-09 21:38:44,071 [INFO] function_tools.brave_search [brave_search.py:201]: Brave search successful: 3 results
2025-09-09 21:38:44,071 [INFO] agents.base.CaseLawAgent [base.py:107]: Calling function tool: llm_enhancer
2025-09-09 21:38:44,072 [INFO] agents.base.CaseLawAgent [base.py:26]: Agent CaseLawAgent completed in 9.16s with confidence 0.00%
2025-09-09 21:38:44,072 [INFO] orchestration.orchestrator [orchestrator.py:185]: Agent CaseLawAgent completed with 0 documents
2025-09-09 21:38:44,073 [INFO] orchestration.orchestrator [orchestrator.py:185]: Agent RegulationAgent completed with 0 documents
2025-09-09 21:38:44,073 [INFO] orchestration.orchestrator [orchestrator.py:185]: Agent PrecedentAgent completed with 0 documents
2025-09-09 21:38:45,627 [INFO] function_tools.brave_search [brave_search.py:261]: Searching sub-query 2: complex Analyze implications
2025-09-09 21:38:46,631 [INFO] function_tools.brave_search [brave_search.py:201]: Brave search successful: 3 results
2025-09-09 21:38:47,133 [INFO] function_tools.brave_search [brave_search.py:261]: Searching sub-query 3: involving company acquiring tax
2025-09-09 21:38:48,030 [INFO] function_tools.brave_search [brave_search.py:201]: Brave search successful: 3 results
2025-09-09 21:38:48,030 [INFO] agents.base.ExpertAgent [base.py:107]: Calling function tool: llm_enhancer
2025-09-09 21:38:48,031 [INFO] agents.base.ExpertAgent [base.py:26]: Agent ExpertAgent completed in 12.95s with confidence 0.00%
2025-09-09 21:38:48,031 [INFO] orchestration.orchestrator [orchestrator.py:185]: Agent ExpertAgent completed with 0 documents
2025-09-09 21:38:48,031 [INFO] orchestration.orchestrator [orchestrator.py:96]: Step 3: External data sourcing evaluation
2025-09-09 21:38:48,031 [INFO] orchestration.orchestrator [orchestrator.py:236]: Vector retrieval summary: 0 docs, 0.07 confidence
2025-09-09 21:38:48,031 [INFO] orchestration.orchestrator [orchestrator.py:242]: Initiating external data sourcing
2025-09-09 21:38:48,031 [INFO] orchestration.orchestrator [orchestrator.py:253]: External sourcing added 0 additional documents
2025-09-09 21:38:48,031 [INFO] orchestration.orchestrator [orchestrator.py:100]: Step 4: LLM response generation and enhancement
2025-09-09 21:38:48,032 [INFO] orchestration.orchestrator [orchestrator.py:270]: LLM enhancement completed for 0 total documents
2025-09-09 21:38:48,032 [INFO] orchestration.orchestrator [orchestrator.py:104]: Step 5: Agent-driven refinement and synthesis
2025-09-09 21:38:48,032 [INFO] orchestration.orchestrator [orchestrator.py:430]: Final refinement: 0 documents selected
2025-09-09 21:39:06,909 [INFO] httpx [_client.py:1740]: HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-09 21:39:22,061 [INFO] httpx [_client.py:1740]: HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-09 21:39:36,601 [INFO] httpx [_client.py:1740]: HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-09 21:39:55,342 [INFO] httpx [_client.py:1740]: HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-09 21:40:23,809 [INFO] httpx [_client.py:1740]: HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-09 21:40:23,813 [INFO] orchestration.orchestrator [orchestrator.py:109]: RAG pipeline completed in 108.90s
2025-09-09 21:40:25,691 [INFO] httpx [_client.py:1025]: HTTP Request: POST https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/messages "HTTP/2 201 Created"
2025-09-09 21:40:45,181 [INFO] httpx [_client.py:1025]: HTTP Request: POST https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/conversations "HTTP/2 201 Created"
2025-09-09 21:40:45,317 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/messages?select=%2A&conversation_id=eq.b39fd246-cf02-410a-aadd-d917f2f52e7b&order=created_at.asc&limit=500 "HTTP/2 200 OK"
2025-09-09 21:40:46,811 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/messages?select=%2A&conversation_id=eq.1b20d64a-839d-4183-8421-a2cd2059c252&order=created_at.asc&limit=500 "HTTP/2 200 OK"
2025-09-09 21:40:49,952 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/messages?select=%2A&conversation_id=eq.b39fd246-cf02-410a-aadd-d917f2f52e7b&order=created_at.asc&limit=500 "HTTP/2 200 OK"
2025-09-09 21:41:01,702 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/conversations?select=%2A&user_id=eq.google-oauth2%7C108986789820619955226&order=created_at.asc&limit=100 "HTTP/2 200 OK"
2025-09-09 21:41:01,845 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/messages?select=%2A&conversation_id=eq.1b20d64a-839d-4183-8421-a2cd2059c252&order=created_at.asc&limit=500 "HTTP/2 200 OK"
2025-09-09 21:41:09,146 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/conversations?select=%2A&user_id=eq.demo-user&order=created_at.asc&limit=100 "HTTP/2 200 OK"
2025-09-09 21:41:20,117 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/conversations?select=%2A&user_id=eq.google-oauth2%7C108986789820619955226&order=created_at.asc&limit=100 "HTTP/2 200 OK"
2025-09-09 21:41:20,328 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/messages?select=%2A&conversation_id=eq.1b20d64a-839d-4183-8421-a2cd2059c252&order=created_at.asc&limit=500 "HTTP/2 200 OK"
2025-09-09 21:41:27,620 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/messages?select=%2A&conversation_id=eq.b39fd246-cf02-410a-aadd-d917f2f52e7b&order=created_at.asc&limit=500 "HTTP/2 200 OK"
2025-09-09 21:41:29,055 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/messages?select=%2A&conversation_id=eq.1b20d64a-839d-4183-8421-a2cd2059c252&order=created_at.asc&limit=500 "HTTP/2 200 OK"
2025-09-09 21:41:30,567 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/messages?select=%2A&conversation_id=eq.b39fd246-cf02-410a-aadd-d917f2f52e7b&order=created_at.asc&limit=500 "HTTP/2 200 OK"
2025-09-09 21:41:59,376 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/messages?select=%2A&conversation_id=eq.1b20d64a-839d-4183-8421-a2cd2059c252&order=created_at.asc&limit=500 "HTTP/2 200 OK"
2025-09-09 21:48:31,275 [INFO] root [main.py:70]: Application shutdown complete
2025-09-09 21:48:31,464 [ERROR] asyncio [base_events.py:1771]: Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x117c15a90>
2025-09-09 21:48:35,983 [INFO] config.logging_config [logging_config.py:87]: Logging configuration initialized successfully
2025-09-09 21:48:36,011 [INFO] root [main.py:41]: Initializing RAG Pipeline API...
2025-09-09 21:48:36,012 [INFO] root [main.py:45]: Settings loaded and validated successfully
2025-09-09 21:48:37,344 [INFO] database.neo4j_client [neo4j_client.py:23]: Neo4j connection established
2025-09-09 21:48:37,359 [INFO] function_tools.registry [registry.py:36]: Initialized Brave Search tool
2025-09-09 21:48:37,370 [INFO] function_tools.registry [registry.py:46]: Initialized LLM Enhancer tool
2025-09-09 21:48:37,371 [INFO] function_tools.registry [registry.py:52]: IRS API tool disabled
2025-09-09 21:48:37,371 [INFO] function_tools.registry [registry.py:58]: Initialized 4 function tools
2025-09-09 21:48:37,371 [INFO] orchestration.orchestrator [orchestrator.py:50]: RAG Orchestrator initialized successfully
2025-09-09 21:48:37,371 [INFO] root [main.py:61]: RAG Pipeline API initialized successfully
2025-09-09 21:48:50,296 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/conversations?select=%2A&user_id=eq.google-oauth2%7C108986789820619955226&order=created_at.asc&limit=100 "HTTP/2 200 OK"
2025-09-09 21:48:50,491 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/messages?select=%2A&conversation_id=eq.1b20d64a-839d-4183-8421-a2cd2059c252&order=created_at.asc&limit=500 "HTTP/2 200 OK"
2025-09-09 21:48:57,491 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/conversations?select=%2A&user_id=eq.google-oauth2%7C108986789820619955226&order=created_at.asc&limit=100 "HTTP/2 200 OK"
2025-09-09 21:48:57,752 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/messages?select=%2A&conversation_id=eq.1b20d64a-839d-4183-8421-a2cd2059c252&order=created_at.asc&limit=500 "HTTP/2 200 OK"
2025-09-09 21:49:05,335 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/conversations?select=%2A&user_id=eq.demo-user&order=created_at.asc&limit=100 "HTTP/2 200 OK"
2025-09-09 21:49:15,019 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/conversations?select=%2A&user_id=eq.google-oauth2%7C108986789820619955226&order=created_at.asc&limit=100 "HTTP/2 200 OK"
2025-09-09 21:49:15,341 [INFO] httpx [_client.py:1025]: HTTP Request: GET https://hiylvfwlwclpdediijgx.supabase.co/rest/v1/messages?select=%2A&conversation_id=eq.1b20d64a-839d-4183-8421-a2cd2059c252&order=created_at.asc&limit=500 "HTTP/2 200 OK"
